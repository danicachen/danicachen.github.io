(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{685:function(s,a,t){"use strict";t.r(a);var e=t(41),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"},[s._v("参考资料")]),t("p",[s._v("以下笔记大多数来源于 "),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1zq4y1p7ga?from=search&seid=14896841834527189848&spm_id_from=333.337.0.0",target:"_blank",rel:"noopener noreferrer"}},[s._v("黑马程序员Vue全套视频教程"),t("OutboundLink")],1),s._v("，本人在此基础上整理补充。\n涉及集数：")]),s._v(" "),t("ul",[t("li",[s._v("P537 Vue3.0-22.综合案例 - 安装和配置axios")]),s._v(" "),t("li",[s._v("P538 Vue3.0-23.综合案例 - 请求用户列表的数据并解决接口跨域问题")])])]),t("h2",{attrs:{id:"项目环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目环境"}},[s._v("#")]),s._v(" 项目环境")]),s._v(" "),t("p",[s._v("axios: ^0.25.0\nvue: ^3.0.0")]),s._v(" "),t("h2",{attrs:{id:"步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤")]),s._v(" "),t("h3",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("用npm等包管理工具安装axios包\n"),t("code",[s._v("npm i axios -S")])])]),s._v(" "),t("li",[t("p",[s._v("安装完成后，在vue项目的"),t("code",[s._v("main.js")]),s._v(" 入口文件中导入并全局配置axios：")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("//导入axios\nimport axios from 'axios'\n\n//用app来接受vue的instance\nconst app = createApp(App)\n\n//配置请求根路径\naxios.defaults.baseURL = 'https://www/escook.cn'\n\n//将axios挂载为全局的$http自定义属性\napp.config.globalProperties.$http = axios\n\napp.mount('#app')\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"请求测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求测试"}},[s._v("#")]),s._v(" 请求测试")]),s._v(" "),t("ol",[t("li",[s._v("在组件中声明"),t("code",[s._v("data")]),s._v("数据"),t("code",[s._v("myList")]),s._v("，拿来接受请求数据")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("data(){\n\treturn{\n\t\tmyList:[]\n\t}\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在组件的"),t("code",[s._v("created")]),s._v("[[生命周期函数]]中，预调用获取数据列表的"),t("code",[s._v("methods")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("created(){\n\tthis.getMyList()\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("在组件的"),t("code",[s._v("mthods")]),s._v("节点中，声明刚才预调用的"),t("code",[s._v("getMyList")]),s._v("方法")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("methods:{\n\tasync getMyList(){\n\t\tconst { data:res } = await this.$http.get('/api/users')\n\t\tif(res.status !== 0) return console.log('用户列表请求失败')\n\t\tthis.userList = res.data\n\t}\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("成功之后重启服务器，打开自己配置请求的页面，如果api请求地址位于站外的话，会发现有cors跨域请求问题。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/vue-cors.jpg",alt:"cors跨域请求"}})]),s._v(" "),t("h3",{attrs:{id:"通过proxy代理来解决cors跨域请求问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过proxy代理来解决cors跨域请求问题"}},[s._v("#")]),s._v(" 通过proxy代理来解决cors跨域请求问题")]),s._v(" "),t("blockquote",[t("p",[s._v("注意devServer.proxy提供的代理功能，仅在开发调试的阶段生效，项目上线发布时，依旧需要API接口服务器开启cors跨域资源共享。")])]),s._v(" "),t("blockquote",[t("p",[s._v("通过 "),t("code",[s._v("vue.config.js")]),s._v(" 中的 "),t("code",[s._v("devServer.proxy")]),s._v(" 即可在开发环境下将 API 请求代理到 API 服务器")])]),s._v(" "),t("p",[t("code",[s._v("vue.config.js")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n\tdevServer: {\n\t\tport:3000,\n\t\topen:true,\n\t\t//会将任何未知请求代理到proxy里指定的值\n\t\tproxy:'https://www.escook.cn'\n\t}\n}\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("blockquote",[t("p",[s._v("同时，在"),t("code",[s._v("main.js")]),s._v("入口文件中，需要把 "),t("code",[s._v("axios")]),s._v("的根路径改造为开发服务器的根路径：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("axios.defaults.baseURL = 'http://localhost:3000'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("重启服务器，可以看到没有报错，声明的"),t("code",[s._v("data")]),s._v("也已经顺利接收到数据\n"),t("img",{attrs:{src:"/img/vue-proxy.jpg",alt:"使用proxy代理后成功获取到数据"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);