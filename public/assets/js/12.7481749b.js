(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{687:function(s,e,a){"use strict";a.r(e);var t=a(41),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("参考资料：")]),a("ol",[a("li",[a("a",{attrs:{href:"https://youtu.be/Htt8AKeF1Kw?t=193",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue 3 and Firebase - Build and deploy a CRUD Application with Vue.js and Firebase"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://firebase.google.com/docs/firestore/quickstart#initialize",target:"_blank",rel:"noopener noreferrer"}},[s._v("初始化 Cloud Firestore"),a("OutboundLink")],1)])])]),a("h2",{attrs:{id:"步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤：")]),s._v(" "),a("ol",[a("li",[s._v("用npm安装firebase")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install firebase@9.4.1 --save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("在"),a("code",[s._v("/src")]),s._v("文件夹下新建"),a("code",[s._v("firebase/firebaseinit.js")]),s._v("配置文件，导入firebase")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import { initializeApp } from "firebase/app";  \nimport { getFirestore } from "firebase/firestore";\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("初始化 "),a("code",[s._v("Cloud Firestore")]),s._v(" 的实例：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const firebaseApp = initializeApp({ \n\tapiKey: '### FIREBASE API KEY ###', \n\tauthDomain: '### FIREBASE AUTH DOMAIN ###', \n\tprojectId: '### CLOUD FIRESTORE PROJECT ID ###'  \n});  \n  \nconst db = getFirestore();\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("导出db")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export default db\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("打开需要使用的组件文件，例如根组件"),a("code",[s._v("App.vue")]),s._v("，导入相关模块")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import db from "./firebase/firebaseinit"\nimport { collection, getDocs } from "firebase/firestore";\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("用"),a("code",[s._v('getDocs(collection(db, "集合名"));')]),s._v("查询集合"),a("code",[s._v("collection")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const querySnapshot = await getDocs(collection(db, "users"));  \nquerySnapshot.forEach((doc) => { \n\tconsole.log(`${doc.id} => ${doc.data()}`);  \n});\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ol",{attrs:{start:"7"}},[a("li",[s._v("增加文档（不指定id的情况下，firestore会自动添加）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// Add a new document with a generated id.\nconst docRef = await addDoc(collection(db, "集合名"), {\n  name: "Tokyo",//示例字段：‘值’\n  country: "Japan"//示例字段：‘值’\n});\nconsole.log("Document written with ID: ", docRef.id);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"8"}},[a("li",[s._v("修改文档")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const newData = doc(db, "集合名", "文档id");\nawait updateDoc(newData, {\n  fieldName:value,\n});\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"9"}},[a("li",[s._v("删除文档")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import { doc, deleteDoc } from "firebase/firestore";\n\nawait deleteDoc(doc(db, "集合名", "文档名"));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("成功获取到数据\n"),a("img",{attrs:{src:"/img/firebase-output.jpg",alt:"output"}})])])}),[],!1,null,null,null);e.default=n.exports}}]);